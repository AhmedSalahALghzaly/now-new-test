{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":215},"end":{"line":6,"column":45,"index":260}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"../../store/appStore","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":261},"end":{"line":7,"column":51,"index":312}}],"key":"n0CCSj0uILqMB2ZG0ZFwUPWKa9s=","exportNames":["*"],"imports":1}},{"name":"../queries","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":8,"column":0,"index":313},"end":{"line":11,"column":20,"index":397}}],"key":"vBqSlLX3RDp+sEQjec929LcVMrw=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"useShoppingHubData\", {\n    enumerable: true,\n    get: function () {\n      return useShoppingHubData;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _storeAppStore = require(_dependencyMap[1], \"../../store/appStore\");\n  var _queries = require(_dependencyMap[2], \"../queries\");\n  /**\n   * useShoppingHubData - Main data fetching and state management hook\n   * FIXED: Removed recursive state updates that caused infinite re-renders\n   * Uses React Query as the single source of truth for cart data\n   */\n\n  /**\n   * Main hook for shopping hub data - uses React Query as single source of truth\n   * FIXED: No longer syncs to Zustand from here to prevent infinite loops\n   */\n  const useShoppingHubData = ({\n    customerId,\n    customerData,\n    isAdminView\n  }) => {\n    const user = (0, _storeAppStore.useAppStore)(state => state.user);\n\n    // Determine target user\n    const targetUserId = customerId || user?.id;\n    const isOwnProfile = !isAdminView && !customerId;\n\n    // Use React Query hooks for data fetching\n    const userDataQuery = (0, _queries.useShoppingHubQuery)(!isAdminView && isOwnProfile);\n    const customerDataQuery = (0, _queries.useCustomerShoppingDataQuery)(customerId, isAdminView && !!customerId);\n\n    // Derive state from queries\n    const loading = (0, _react.useMemo)(() => {\n      if (isAdminView && customerId) {\n        return customerDataQuery.isLoading;\n      }\n      return userDataQuery.isLoading;\n    }, [isAdminView, customerId, customerDataQuery.isLoading, userDataQuery.isLoading]);\n    const refreshing = (0, _react.useMemo)(() => {\n      if (isAdminView && customerId) {\n        return customerDataQuery.isRefetching;\n      }\n      return userDataQuery.isRefetching;\n    }, [isAdminView, customerId, customerDataQuery.isRefetching, userDataQuery.isRefetching]);\n    const favorites = (0, _react.useMemo)(() => {\n      if (isAdminView && customerId) {\n        return customerDataQuery.favorites;\n      }\n      return userDataQuery.favorites;\n    }, [isAdminView, customerId, customerDataQuery.favorites, userDataQuery.favorites]);\n    const cartItems = (0, _react.useMemo)(() => {\n      if (isAdminView && customerId) {\n        return customerDataQuery.cart;\n      }\n      return userDataQuery.cartItems;\n    }, [isAdminView, customerId, customerDataQuery.cart, userDataQuery.cartItems]);\n    const orders = (0, _react.useMemo)(() => {\n      if (isAdminView && customerId) {\n        return customerDataQuery.orders;\n      }\n      return userDataQuery.orders;\n    }, [isAdminView, customerId, customerDataQuery.orders, userDataQuery.orders]);\n    const profileData = (0, _react.useMemo)(() => {\n      if (isAdminView && customerId) {\n        return customerData;\n      }\n      return userDataQuery.profileData;\n    }, [isAdminView, customerId, customerData, userDataQuery.profileData]);\n\n    // Refresh function\n    const onRefresh = (0, _react.useCallback)(() => {\n      if (isAdminView && customerId) {\n        customerDataQuery.refetch();\n      } else {\n        userDataQuery.refetch();\n      }\n    }, [isAdminView, customerId, customerDataQuery, userDataQuery]);\n\n    // Load data function (for backward compatibility)\n    const loadData = (0, _react.useCallback)(() => {\n      onRefresh();\n    }, [onRefresh]);\n\n    // Stub functions for backward compatibility - no longer needed\n    const setFavorites = (0, _react.useCallback)(() => {}, []);\n    const setLocalCartItems = (0, _react.useCallback)(() => {}, []);\n    const setOrders = (0, _react.useCallback)(() => {}, []);\n    return {\n      loading,\n      refreshing,\n      favorites,\n      cartItems,\n      orders,\n      profileData,\n      targetUserId,\n      isOwnProfile,\n      loadData,\n      onRefresh,\n      setFavorites,\n      setLocalCartItems,\n      setOrders\n    };\n  };\n  var _default = useShoppingHubData;\n});","lineCount":120,"map":[[7,2,129,0,"Object"],[7,8,129,0],[7,9,129,0,"defineProperty"],[7,23,129,0],[7,24,129,0,"exports"],[7,31,129,0],[8,4,129,0,"enumerable"],[8,14,129,0],[9,4,129,0,"get"],[9,7,129,0],[9,18,129,0,"get"],[9,19,129,0],[10,6,129,0],[10,13,129,0,"_default"],[10,21,129,0],[11,4,129,0],[12,2,129,0],[13,2,32,0,"Object"],[13,8,32,0],[13,9,32,0,"defineProperty"],[13,23,32,0],[13,24,32,0,"exports"],[13,31,32,0],[14,4,32,0,"enumerable"],[14,14,32,0],[15,4,32,0,"get"],[15,7,32,0],[15,18,32,0,"get"],[15,19,32,0],[16,6,32,0],[16,13,32,0,"useShoppingHubData"],[16,31,32,0],[17,4,32,0],[18,2,32,0],[19,2,6,0],[19,6,6,0,"_react"],[19,12,6,0],[19,15,6,0,"require"],[19,22,6,0],[19,23,6,0,"_dependencyMap"],[19,37,6,0],[20,2,7,0],[20,6,7,0,"_storeAppStore"],[20,20,7,0],[20,23,7,0,"require"],[20,30,7,0],[20,31,7,0,"_dependencyMap"],[20,45,7,0],[21,2,8,0],[21,6,8,0,"_queries"],[21,14,8,0],[21,17,8,0,"require"],[21,24,8,0],[21,25,8,0,"_dependencyMap"],[21,39,8,0],[22,2,1,0],[23,0,2,0],[24,0,3,0],[25,0,4,0],[26,0,5,0],[28,2,28,0],[29,0,29,0],[30,0,30,0],[31,0,31,0],[32,2,32,7],[32,8,32,13,"useShoppingHubData"],[32,26,32,31],[32,29,32,34,"useShoppingHubData"],[32,30,32,35],[33,4,33,2,"customerId"],[33,14,33,12],[34,4,34,2,"customerData"],[34,16,34,14],[35,4,35,2,"isAdminView"],[36,2,36,25],[36,3,36,26],[36,8,36,31],[37,4,37,2],[37,10,37,8,"user"],[37,14,37,12],[37,17,37,15],[37,21,37,15,"useAppStore"],[37,35,37,26],[37,36,37,26,"useAppStore"],[37,47,37,26],[37,49,37,28,"state"],[37,54,37,33],[37,58,37,38,"state"],[37,63,37,43],[37,64,37,44,"user"],[37,68,37,48],[37,69,37,49],[39,4,39,2],[40,4,40,2],[40,10,40,8,"targetUserId"],[40,22,40,20],[40,25,40,23,"customerId"],[40,35,40,33],[40,39,40,37,"user"],[40,43,40,41],[40,45,40,43,"id"],[40,47,40,45],[41,4,41,2],[41,10,41,8,"isOwnProfile"],[41,22,41,20],[41,25,41,23],[41,26,41,24,"isAdminView"],[41,37,41,35],[41,41,41,39],[41,42,41,40,"customerId"],[41,52,41,50],[43,4,43,2],[44,4,44,2],[44,10,44,8,"userDataQuery"],[44,23,44,21],[44,26,44,24],[44,30,44,24,"useShoppingHubQuery"],[44,38,44,43],[44,39,44,43,"useShoppingHubQuery"],[44,58,44,43],[44,60,44,44],[44,61,44,45,"isAdminView"],[44,72,44,56],[44,76,44,60,"isOwnProfile"],[44,88,44,72],[44,89,44,73],[45,4,45,2],[45,10,45,8,"customerDataQuery"],[45,27,45,25],[45,30,45,28],[45,34,45,28,"useCustomerShoppingDataQuery"],[45,42,45,56],[45,43,45,56,"useCustomerShoppingDataQuery"],[45,71,45,56],[45,73,46,4,"customerId"],[45,83,46,14],[45,85,47,4,"isAdminView"],[45,96,47,15],[45,100,47,19],[45,101,47,20],[45,102,47,21,"customerId"],[45,112,48,2],[45,113,48,3],[47,4,50,2],[48,4,51,2],[48,10,51,8,"loading"],[48,17,51,15],[48,20,51,18],[48,24,51,18,"useMemo"],[48,30,51,25],[48,31,51,25,"useMemo"],[48,38,51,25],[48,40,51,26],[48,46,51,32],[49,6,52,4],[49,10,52,8,"isAdminView"],[49,21,52,19],[49,25,52,23,"customerId"],[49,35,52,33],[49,37,52,35],[50,8,53,6],[50,15,53,13,"customerDataQuery"],[50,32,53,30],[50,33,53,31,"isLoading"],[50,42,53,40],[51,6,54,4],[52,6,55,4],[52,13,55,11,"userDataQuery"],[52,26,55,24],[52,27,55,25,"isLoading"],[52,36,55,34],[53,4,56,2],[53,5,56,3],[53,7,56,5],[53,8,56,6,"isAdminView"],[53,19,56,17],[53,21,56,19,"customerId"],[53,31,56,29],[53,33,56,31,"customerDataQuery"],[53,50,56,48],[53,51,56,49,"isLoading"],[53,60,56,58],[53,62,56,60,"userDataQuery"],[53,75,56,73],[53,76,56,74,"isLoading"],[53,85,56,83],[53,86,56,84],[53,87,56,85],[54,4,58,2],[54,10,58,8,"refreshing"],[54,20,58,18],[54,23,58,21],[54,27,58,21,"useMemo"],[54,33,58,28],[54,34,58,28,"useMemo"],[54,41,58,28],[54,43,58,29],[54,49,58,35],[55,6,59,4],[55,10,59,8,"isAdminView"],[55,21,59,19],[55,25,59,23,"customerId"],[55,35,59,33],[55,37,59,35],[56,8,60,6],[56,15,60,13,"customerDataQuery"],[56,32,60,30],[56,33,60,31,"isRefetching"],[56,45,60,43],[57,6,61,4],[58,6,62,4],[58,13,62,11,"userDataQuery"],[58,26,62,24],[58,27,62,25,"isRefetching"],[58,39,62,37],[59,4,63,2],[59,5,63,3],[59,7,63,5],[59,8,63,6,"isAdminView"],[59,19,63,17],[59,21,63,19,"customerId"],[59,31,63,29],[59,33,63,31,"customerDataQuery"],[59,50,63,48],[59,51,63,49,"isRefetching"],[59,63,63,61],[59,65,63,63,"userDataQuery"],[59,78,63,76],[59,79,63,77,"isRefetching"],[59,91,63,89],[59,92,63,90],[59,93,63,91],[60,4,65,2],[60,10,65,8,"favorites"],[60,19,65,17],[60,22,65,20],[60,26,65,20,"useMemo"],[60,32,65,27],[60,33,65,27,"useMemo"],[60,40,65,27],[60,42,65,28],[60,48,65,34],[61,6,66,4],[61,10,66,8,"isAdminView"],[61,21,66,19],[61,25,66,23,"customerId"],[61,35,66,33],[61,37,66,35],[62,8,67,6],[62,15,67,13,"customerDataQuery"],[62,32,67,30],[62,33,67,31,"favorites"],[62,42,67,40],[63,6,68,4],[64,6,69,4],[64,13,69,11,"userDataQuery"],[64,26,69,24],[64,27,69,25,"favorites"],[64,36,69,34],[65,4,70,2],[65,5,70,3],[65,7,70,5],[65,8,70,6,"isAdminView"],[65,19,70,17],[65,21,70,19,"customerId"],[65,31,70,29],[65,33,70,31,"customerDataQuery"],[65,50,70,48],[65,51,70,49,"favorites"],[65,60,70,58],[65,62,70,60,"userDataQuery"],[65,75,70,73],[65,76,70,74,"favorites"],[65,85,70,83],[65,86,70,84],[65,87,70,85],[66,4,72,2],[66,10,72,8,"cartItems"],[66,19,72,17],[66,22,72,20],[66,26,72,20,"useMemo"],[66,32,72,27],[66,33,72,27,"useMemo"],[66,40,72,27],[66,42,72,28],[66,48,72,34],[67,6,73,4],[67,10,73,8,"isAdminView"],[67,21,73,19],[67,25,73,23,"customerId"],[67,35,73,33],[67,37,73,35],[68,8,74,6],[68,15,74,13,"customerDataQuery"],[68,32,74,30],[68,33,74,31,"cart"],[68,37,74,35],[69,6,75,4],[70,6,76,4],[70,13,76,11,"userDataQuery"],[70,26,76,24],[70,27,76,25,"cartItems"],[70,36,76,34],[71,4,77,2],[71,5,77,3],[71,7,77,5],[71,8,77,6,"isAdminView"],[71,19,77,17],[71,21,77,19,"customerId"],[71,31,77,29],[71,33,77,31,"customerDataQuery"],[71,50,77,48],[71,51,77,49,"cart"],[71,55,77,53],[71,57,77,55,"userDataQuery"],[71,70,77,68],[71,71,77,69,"cartItems"],[71,80,77,78],[71,81,77,79],[71,82,77,80],[72,4,79,2],[72,10,79,8,"orders"],[72,16,79,14],[72,19,79,17],[72,23,79,17,"useMemo"],[72,29,79,24],[72,30,79,24,"useMemo"],[72,37,79,24],[72,39,79,25],[72,45,79,31],[73,6,80,4],[73,10,80,8,"isAdminView"],[73,21,80,19],[73,25,80,23,"customerId"],[73,35,80,33],[73,37,80,35],[74,8,81,6],[74,15,81,13,"customerDataQuery"],[74,32,81,30],[74,33,81,31,"orders"],[74,39,81,37],[75,6,82,4],[76,6,83,4],[76,13,83,11,"userDataQuery"],[76,26,83,24],[76,27,83,25,"orders"],[76,33,83,31],[77,4,84,2],[77,5,84,3],[77,7,84,5],[77,8,84,6,"isAdminView"],[77,19,84,17],[77,21,84,19,"customerId"],[77,31,84,29],[77,33,84,31,"customerDataQuery"],[77,50,84,48],[77,51,84,49,"orders"],[77,57,84,55],[77,59,84,57,"userDataQuery"],[77,72,84,70],[77,73,84,71,"orders"],[77,79,84,77],[77,80,84,78],[77,81,84,79],[78,4,86,2],[78,10,86,8,"profileData"],[78,21,86,19],[78,24,86,22],[78,28,86,22,"useMemo"],[78,34,86,29],[78,35,86,29,"useMemo"],[78,42,86,29],[78,44,86,30],[78,50,86,36],[79,6,87,4],[79,10,87,8,"isAdminView"],[79,21,87,19],[79,25,87,23,"customerId"],[79,35,87,33],[79,37,87,35],[80,8,88,6],[80,15,88,13,"customerData"],[80,27,88,25],[81,6,89,4],[82,6,90,4],[82,13,90,11,"userDataQuery"],[82,26,90,24],[82,27,90,25,"profileData"],[82,38,90,36],[83,4,91,2],[83,5,91,3],[83,7,91,5],[83,8,91,6,"isAdminView"],[83,19,91,17],[83,21,91,19,"customerId"],[83,31,91,29],[83,33,91,31,"customerData"],[83,45,91,43],[83,47,91,45,"userDataQuery"],[83,60,91,58],[83,61,91,59,"profileData"],[83,72,91,70],[83,73,91,71],[83,74,91,72],[85,4,93,2],[86,4,94,2],[86,10,94,8,"onRefresh"],[86,19,94,17],[86,22,94,20],[86,26,94,20,"useCallback"],[86,32,94,31],[86,33,94,31,"useCallback"],[86,44,94,31],[86,46,94,32],[86,52,94,38],[87,6,95,4],[87,10,95,8,"isAdminView"],[87,21,95,19],[87,25,95,23,"customerId"],[87,35,95,33],[87,37,95,35],[88,8,96,6,"customerDataQuery"],[88,25,96,23],[88,26,96,24,"refetch"],[88,33,96,31],[88,34,96,32],[88,35,96,33],[89,6,97,4],[89,7,97,5],[89,13,97,11],[90,8,98,6,"userDataQuery"],[90,21,98,19],[90,22,98,20,"refetch"],[90,29,98,27],[90,30,98,28],[90,31,98,29],[91,6,99,4],[92,4,100,2],[92,5,100,3],[92,7,100,5],[92,8,100,6,"isAdminView"],[92,19,100,17],[92,21,100,19,"customerId"],[92,31,100,29],[92,33,100,31,"customerDataQuery"],[92,50,100,48],[92,52,100,50,"userDataQuery"],[92,65,100,63],[92,66,100,64],[92,67,100,65],[94,4,102,2],[95,4,103,2],[95,10,103,8,"loadData"],[95,18,103,16],[95,21,103,19],[95,25,103,19,"useCallback"],[95,31,103,30],[95,32,103,30,"useCallback"],[95,43,103,30],[95,45,103,31],[95,51,103,37],[96,6,104,4,"onRefresh"],[96,15,104,13],[96,16,104,14],[96,17,104,15],[97,4,105,2],[97,5,105,3],[97,7,105,5],[97,8,105,6,"onRefresh"],[97,17,105,15],[97,18,105,16],[97,19,105,17],[99,4,107,2],[100,4,108,2],[100,10,108,8,"setFavorites"],[100,22,108,20],[100,25,108,23],[100,29,108,23,"useCallback"],[100,35,108,34],[100,36,108,34,"useCallback"],[100,47,108,34],[100,49,108,35],[100,55,108,41],[100,56,108,42],[100,57,108,43],[100,59,108,45],[100,61,108,47],[100,62,108,48],[101,4,109,2],[101,10,109,8,"setLocalCartItems"],[101,27,109,25],[101,30,109,28],[101,34,109,28,"useCallback"],[101,40,109,39],[101,41,109,39,"useCallback"],[101,52,109,39],[101,54,109,40],[101,60,109,46],[101,61,109,47],[101,62,109,48],[101,64,109,50],[101,66,109,52],[101,67,109,53],[102,4,110,2],[102,10,110,8,"setOrders"],[102,19,110,17],[102,22,110,20],[102,26,110,20,"useCallback"],[102,32,110,31],[102,33,110,31,"useCallback"],[102,44,110,31],[102,46,110,32],[102,52,110,38],[102,53,110,39],[102,54,110,40],[102,56,110,42],[102,58,110,44],[102,59,110,45],[103,4,112,2],[103,11,112,9],[104,6,113,4,"loading"],[104,13,113,11],[105,6,114,4,"refreshing"],[105,16,114,14],[106,6,115,4,"favorites"],[106,15,115,13],[107,6,116,4,"cartItems"],[107,15,116,13],[108,6,117,4,"orders"],[108,12,117,10],[109,6,118,4,"profileData"],[109,17,118,15],[110,6,119,4,"targetUserId"],[110,18,119,16],[111,6,120,4,"isOwnProfile"],[111,18,120,16],[112,6,121,4,"loadData"],[112,14,121,12],[113,6,122,4,"onRefresh"],[113,15,122,13],[114,6,123,4,"setFavorites"],[114,18,123,16],[115,6,124,4,"setLocalCartItems"],[115,23,124,21],[116,6,125,4,"setOrders"],[117,4,126,2],[117,5,126,3],[118,2,127,0],[118,3,127,1],[119,2,129,0],[119,6,129,0,"_default"],[119,14,129,0],[119,17,129,15,"useShoppingHubData"],[119,35,129,33],[120,0,129,34],[120,3]],"functionMap":{"names":["<global>","useShoppingHubData","useAppStore$argument_0","useMemo$argument_0","onRefresh","loadData","setFavorites","setLocalCartItems","setOrders"],"mappings":"AAA;kCC+B;2BCK,qBD;0BEc;GFK;6BEE;GFK;4BEE;GFK;4BEE;GFK;yBEE;GFK;8BEE;GFK;gCGG;GHM;+BIG;GJE;mCKG,QL;wCMC,QN;gCOC,QP;CDiB"},"hasCjsExports":false},"type":"js/module"}]}