{"dependencies":[{"name":"expo-screen-capture","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":166},"end":{"line":6,"column":53,"index":219}}],"key":"weC/3xT0gAlh9GNVLRPcRBCFNRc=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/AppState","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"JfCM6WRyn2619+pzBJhEHd1+SSw=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"screenshotProtectionService\", {\n    enumerable: true,\n    get: function () {\n      return screenshotProtectionService;\n    }\n  });\n  var _expoScreenCapture = require(_dependencyMap[0], \"expo-screen-capture\");\n  var ScreenCapture = _interopNamespace(_expoScreenCapture);\n  var _reactNativeWebDistExportsAppState = require(_dependencyMap[1], \"react-native-web/dist/exports/AppState\");\n  var AppState = _interopDefault(_reactNativeWebDistExportsAppState);\n  /**\n   * Screenshot Protection Service\n   * Prevents screenshots on all screens except Home and Product Detail\n   * Uses expo-screen-capture for cross-platform support\n   */\n\n  // Screens where screenshots ARE allowed\n  const ALLOWED_SCREENS = ['(tabs)',\n  // Home tab\n  '(tabs)/index',\n  // Home screen\n  'index',\n  // Home screen\n  'product/[id]',\n  // Product detail\n  'product' // Product detail\n  ];\n  class ScreenshotProtectionService {\n    isProtectionEnabled = false;\n    currentScreen = '';\n    appStateSubscription = null;\n\n    /**\n     * Initialize the screenshot protection service\n     */\n    async initialize() {\n      try {\n        // Check if screen capture is available\n        const isAvailable = await ScreenCapture.isAvailableAsync();\n        if (!isAvailable) {\n          console.log('[ScreenshotProtection] Screen capture API not available on this device');\n          return;\n        }\n\n        // Subscribe to app state changes to manage protection\n        this.appStateSubscription = AppState.default.addEventListener('change', this.handleAppStateChange);\n        console.log('[ScreenshotProtection] Service initialized');\n      } catch (error) {\n        console.error('[ScreenshotProtection] Initialization failed:', error);\n      }\n    }\n\n    /**\n     * Handle app state changes\n     */\n    handleAppStateChange = async nextAppState => {\n      if (nextAppState === 'active') {\n        // Re-apply protection when app comes to foreground\n        if (!this.isScreenshotAllowed(this.currentScreen)) {\n          await this.enableProtection();\n        }\n      }\n    };\n\n    /**\n     * Check if screenshot is allowed for the current screen\n     */\n    isScreenshotAllowed(screenName) {\n      // Check if screen matches any allowed pattern\n      return ALLOWED_SCREENS.some(allowed => {\n        // Exact match\n        if (screenName === allowed) return true;\n\n        // Check if screen starts with allowed pattern (for nested routes)\n        if (screenName.startsWith(allowed)) return true;\n\n        // Check for product detail pattern\n        if (allowed === 'product/[id]' && screenName.startsWith('product/')) return true;\n        return false;\n      });\n    }\n\n    /**\n     * Update protection based on current screen\n     */\n    async updateForScreen(screenName) {\n      this.currentScreen = screenName;\n      console.log(`[ScreenshotProtection] Screen changed to: ${screenName}`);\n      if (this.isScreenshotAllowed(screenName)) {\n        console.log('[ScreenshotProtection] Screenshots ALLOWED on this screen');\n        await this.disableProtection();\n      } else {\n        console.log('[ScreenshotProtection] Screenshots BLOCKED on this screen');\n        await this.enableProtection();\n      }\n    }\n\n    /**\n     * Enable screenshot protection\n     */\n    async enableProtection() {\n      if (this.isProtectionEnabled) return;\n      try {\n        await ScreenCapture.preventScreenCaptureAsync();\n        this.isProtectionEnabled = true;\n        console.log('[ScreenshotProtection] Protection ENABLED');\n      } catch (error) {\n        console.error('[ScreenshotProtection] Failed to enable protection:', error);\n      }\n    }\n\n    /**\n     * Disable screenshot protection\n     */\n    async disableProtection() {\n      if (!this.isProtectionEnabled) return;\n      try {\n        await ScreenCapture.allowScreenCaptureAsync();\n        this.isProtectionEnabled = false;\n        console.log('[ScreenshotProtection] Protection DISABLED');\n      } catch (error) {\n        console.error('[ScreenshotProtection] Failed to disable protection:', error);\n      }\n    }\n\n    /**\n     * Get current protection status\n     */\n    getStatus() {\n      return {\n        isEnabled: this.isProtectionEnabled,\n        currentScreen: this.currentScreen,\n        isAllowed: this.isScreenshotAllowed(this.currentScreen)\n      };\n    }\n\n    /**\n     * Add listener for screenshot taken events\n     */\n    addScreenshotListener(callback) {\n      const subscription = ScreenCapture.addScreenshotListener(callback);\n      return () => subscription.remove();\n    }\n\n    /**\n     * Cleanup and disable protection\n     */\n    async cleanup() {\n      if (this.appStateSubscription) {\n        this.appStateSubscription.remove();\n        this.appStateSubscription = null;\n      }\n      await this.disableProtection();\n      console.log('[ScreenshotProtection] Service cleaned up');\n    }\n  }\n  const screenshotProtectionService = new ScreenshotProtectionService();\n  var _default = screenshotProtectionService;\n});","lineCount":191,"map":[[27,2,157,0,"Object"],[27,8,157,0],[27,9,157,0,"defineProperty"],[27,23,157,0],[27,24,157,0,"exports"],[27,31,157,0],[28,4,157,0,"enumerable"],[28,14,157,0],[29,4,157,0,"get"],[29,7,157,0],[29,18,157,0,"get"],[29,19,157,0],[30,6,157,0],[30,13,157,0,"_default"],[30,21,157,0],[31,4,157,0],[32,2,157,0],[33,2,156,0,"Object"],[33,8,156,0],[33,9,156,0,"defineProperty"],[33,23,156,0],[33,24,156,0,"exports"],[33,31,156,0],[34,4,156,0,"enumerable"],[34,14,156,0],[35,4,156,0,"get"],[35,7,156,0],[35,18,156,0,"get"],[35,19,156,0],[36,6,156,0],[36,13,156,0,"screenshotProtectionService"],[36,40,156,0],[37,4,156,0],[38,2,156,0],[39,2,6,0],[39,6,6,0,"_expoScreenCapture"],[39,24,6,0],[39,27,6,0,"require"],[39,34,6,0],[39,35,6,0,"_dependencyMap"],[39,49,6,0],[40,2,6,0],[40,6,6,0,"ScreenCapture"],[40,19,6,0],[40,22,6,0,"_interopNamespace"],[40,39,6,0],[40,40,6,0,"_expoScreenCapture"],[40,58,6,0],[41,2,6,53],[41,6,6,53,"_reactNativeWebDistExportsAppState"],[41,40,6,53],[41,43,6,53,"require"],[41,50,6,53],[41,51,6,53,"_dependencyMap"],[41,65,6,53],[42,2,6,53],[42,6,6,53,"AppState"],[42,14,6,53],[42,17,6,53,"_interopDefault"],[42,32,6,53],[42,33,6,53,"_reactNativeWebDistExportsAppState"],[42,67,6,53],[43,2,1,0],[44,0,2,0],[45,0,3,0],[46,0,4,0],[47,0,5,0],[49,2,9,0],[50,2,10,0],[50,8,10,6,"ALLOWED_SCREENS"],[50,23,10,21],[50,26,10,24],[50,27,11,2],[50,35,11,10],[51,2,11,22],[52,2,12,2],[52,16,12,16],[53,2,12,22],[54,2,13,2],[54,9,13,9],[55,2,13,22],[56,2,14,2],[56,16,14,16],[57,2,14,22],[58,2,15,2],[58,11,15,11],[58,12,15,22],[59,2,15,22],[59,3,16,1],[60,2,18,0],[60,8,18,6,"ScreenshotProtectionService"],[60,35,18,33],[60,36,18,34],[61,4,19,10,"isProtectionEnabled"],[61,23,19,29],[61,26,19,32],[61,31,19,37],[62,4,20,10,"currentScreen"],[62,17,20,23],[62,20,20,26],[62,22,20,28],[63,4,21,10,"appStateSubscription"],[63,24,21,30],[63,27,21,38],[63,31,21,42],[65,4,23,2],[66,0,24,0],[67,0,25,0],[68,4,26,2],[68,10,26,8,"initialize"],[68,20,26,18,"initialize"],[68,21,26,18],[68,23,26,36],[69,6,27,4],[69,10,27,8],[70,8,28,6],[71,8,29,6],[71,14,29,12,"isAvailable"],[71,25,29,23],[71,28,29,26],[71,34,29,32,"ScreenCapture"],[71,47,29,45],[71,48,29,46,"isAvailableAsync"],[71,64,29,62],[71,65,29,63],[71,66,29,64],[72,8,31,6],[72,12,31,10],[72,13,31,11,"isAvailable"],[72,24,31,22],[72,26,31,24],[73,10,32,8,"console"],[73,17,32,15],[73,18,32,16,"log"],[73,21,32,19],[73,22,32,20],[73,94,32,92],[73,95,32,93],[74,10,33,8],[75,8,34,6],[77,8,36,6],[78,8,37,6],[78,12,37,10],[78,13,37,11,"appStateSubscription"],[78,33,37,31],[78,36,37,34,"AppState"],[78,44,37,42],[78,45,37,42,"default"],[78,52,37,42],[78,53,37,43,"addEventListener"],[78,69,37,59],[78,70,37,60],[78,78,37,68],[78,80,37,70],[78,84,37,74],[78,85,37,75,"handleAppStateChange"],[78,105,37,95],[78,106,37,96],[79,8,39,6,"console"],[79,15,39,13],[79,16,39,14,"log"],[79,19,39,17],[79,20,39,18],[79,64,39,62],[79,65,39,63],[80,6,40,4],[80,7,40,5],[80,8,40,6],[80,15,40,13,"error"],[80,20,40,18],[80,22,40,20],[81,8,41,6,"console"],[81,15,41,13],[81,16,41,14,"error"],[81,21,41,19],[81,22,41,20],[81,69,41,67],[81,71,41,69,"error"],[81,76,41,74],[81,77,41,75],[82,6,42,4],[83,4,43,2],[85,4,45,2],[86,0,46,0],[87,0,47,0],[88,4,48,10,"handleAppStateChange"],[88,24,48,30],[88,27,48,33],[88,33,48,40,"nextAppState"],[88,45,48,68],[88,49,48,73],[89,6,49,4],[89,10,49,8,"nextAppState"],[89,22,49,20],[89,27,49,25],[89,35,49,33],[89,37,49,35],[90,8,50,6],[91,8,51,6],[91,12,51,10],[91,13,51,11],[91,17,51,15],[91,18,51,16,"isScreenshotAllowed"],[91,37,51,35],[91,38,51,36],[91,42,51,40],[91,43,51,41,"currentScreen"],[91,56,51,54],[91,57,51,55],[91,59,51,57],[92,10,52,8],[92,16,52,14],[92,20,52,18],[92,21,52,19,"enableProtection"],[92,37,52,35],[92,38,52,36],[92,39,52,37],[93,8,53,6],[94,6,54,4],[95,4,55,2],[95,5,55,3],[97,4,57,2],[98,0,58,0],[99,0,59,0],[100,4,60,2,"isScreenshotAllowed"],[100,23,60,21,"isScreenshotAllowed"],[100,24,60,22,"screenName"],[100,34,60,40],[100,36,60,51],[101,6,61,4],[102,6,62,4],[102,13,62,11,"ALLOWED_SCREENS"],[102,28,62,26],[102,29,62,27,"some"],[102,33,62,31],[102,34,62,32,"allowed"],[102,41,62,39],[102,45,62,43],[103,8,63,6],[104,8,64,6],[104,12,64,10,"screenName"],[104,22,64,20],[104,27,64,25,"allowed"],[104,34,64,32],[104,36,64,34],[104,43,64,41],[104,47,64,45],[106,8,66,6],[107,8,67,6],[107,12,67,10,"screenName"],[107,22,67,20],[107,23,67,21,"startsWith"],[107,33,67,31],[107,34,67,32,"allowed"],[107,41,67,39],[107,42,67,40],[107,44,67,42],[107,51,67,49],[107,55,67,53],[109,8,69,6],[110,8,70,6],[110,12,70,10,"allowed"],[110,19,70,17],[110,24,70,22],[110,38,70,36],[110,42,70,40,"screenName"],[110,52,70,50],[110,53,70,51,"startsWith"],[110,63,70,61],[110,64,70,62],[110,74,70,72],[110,75,70,73],[110,77,70,75],[110,84,70,82],[110,88,70,86],[111,8,72,6],[111,15,72,13],[111,20,72,18],[112,6,73,4],[112,7,73,5],[112,8,73,6],[113,4,74,2],[115,4,76,2],[116,0,77,0],[117,0,78,0],[118,4,79,2],[118,10,79,8,"updateForScreen"],[118,25,79,23,"updateForScreen"],[118,26,79,24,"screenName"],[118,36,79,42],[118,38,79,59],[119,6,80,4],[119,10,80,8],[119,11,80,9,"currentScreen"],[119,24,80,22],[119,27,80,25,"screenName"],[119,37,80,35],[120,6,82,4,"console"],[120,13,82,11],[120,14,82,12,"log"],[120,17,82,15],[120,18,82,16],[120,63,82,61,"screenName"],[120,73,82,71],[120,75,82,73],[120,76,82,74],[121,6,84,4],[121,10,84,8],[121,14,84,12],[121,15,84,13,"isScreenshotAllowed"],[121,34,84,32],[121,35,84,33,"screenName"],[121,45,84,43],[121,46,84,44],[121,48,84,46],[122,8,85,6,"console"],[122,15,85,13],[122,16,85,14,"log"],[122,19,85,17],[122,20,85,18],[122,79,85,77],[122,80,85,78],[123,8,86,6],[123,14,86,12],[123,18,86,16],[123,19,86,17,"disableProtection"],[123,36,86,34],[123,37,86,35],[123,38,86,36],[124,6,87,4],[124,7,87,5],[124,13,87,11],[125,8,88,6,"console"],[125,15,88,13],[125,16,88,14,"log"],[125,19,88,17],[125,20,88,18],[125,79,88,77],[125,80,88,78],[126,8,89,6],[126,14,89,12],[126,18,89,16],[126,19,89,17,"enableProtection"],[126,35,89,33],[126,36,89,34],[126,37,89,35],[127,6,90,4],[128,4,91,2],[130,4,93,2],[131,0,94,0],[132,0,95,0],[133,4,96,2],[133,10,96,8,"enableProtection"],[133,26,96,24,"enableProtection"],[133,27,96,24],[133,29,96,42],[134,6,97,4],[134,10,97,8],[134,14,97,12],[134,15,97,13,"isProtectionEnabled"],[134,34,97,32],[134,36,97,34],[135,6,99,4],[135,10,99,8],[136,8,100,6],[136,14,100,12,"ScreenCapture"],[136,27,100,25],[136,28,100,26,"preventScreenCaptureAsync"],[136,53,100,51],[136,54,100,52],[136,55,100,53],[137,8,101,6],[137,12,101,10],[137,13,101,11,"isProtectionEnabled"],[137,32,101,30],[137,35,101,33],[137,39,101,37],[138,8,102,6,"console"],[138,15,102,13],[138,16,102,14,"log"],[138,19,102,17],[138,20,102,18],[138,63,102,61],[138,64,102,62],[139,6,103,4],[139,7,103,5],[139,8,103,6],[139,15,103,13,"error"],[139,20,103,18],[139,22,103,20],[140,8,104,6,"console"],[140,15,104,13],[140,16,104,14,"error"],[140,21,104,19],[140,22,104,20],[140,75,104,73],[140,77,104,75,"error"],[140,82,104,80],[140,83,104,81],[141,6,105,4],[142,4,106,2],[144,4,108,2],[145,0,109,0],[146,0,110,0],[147,4,111,2],[147,10,111,8,"disableProtection"],[147,27,111,25,"disableProtection"],[147,28,111,25],[147,30,111,43],[148,6,112,4],[148,10,112,8],[148,11,112,9],[148,15,112,13],[148,16,112,14,"isProtectionEnabled"],[148,35,112,33],[148,37,112,35],[149,6,114,4],[149,10,114,8],[150,8,115,6],[150,14,115,12,"ScreenCapture"],[150,27,115,25],[150,28,115,26,"allowScreenCaptureAsync"],[150,51,115,49],[150,52,115,50],[150,53,115,51],[151,8,116,6],[151,12,116,10],[151,13,116,11,"isProtectionEnabled"],[151,32,116,30],[151,35,116,33],[151,40,116,38],[152,8,117,6,"console"],[152,15,117,13],[152,16,117,14,"log"],[152,19,117,17],[152,20,117,18],[152,64,117,62],[152,65,117,63],[153,6,118,4],[153,7,118,5],[153,8,118,6],[153,15,118,13,"error"],[153,20,118,18],[153,22,118,20],[154,8,119,6,"console"],[154,15,119,13],[154,16,119,14,"error"],[154,21,119,19],[154,22,119,20],[154,76,119,74],[154,78,119,76,"error"],[154,83,119,81],[154,84,119,82],[155,6,120,4],[156,4,121,2],[158,4,123,2],[159,0,124,0],[160,0,125,0],[161,4,126,2,"getStatus"],[161,13,126,11,"getStatus"],[161,14,126,11],[161,16,126,81],[162,6,127,4],[162,13,127,11],[163,8,128,6,"isEnabled"],[163,17,128,15],[163,19,128,17],[163,23,128,21],[163,24,128,22,"isProtectionEnabled"],[163,43,128,41],[164,8,129,6,"currentScreen"],[164,21,129,19],[164,23,129,21],[164,27,129,25],[164,28,129,26,"currentScreen"],[164,41,129,39],[165,8,130,6,"isAllowed"],[165,17,130,15],[165,19,130,17],[165,23,130,21],[165,24,130,22,"isScreenshotAllowed"],[165,43,130,41],[165,44,130,42],[165,48,130,46],[165,49,130,47,"currentScreen"],[165,62,130,60],[166,6,131,4],[166,7,131,5],[167,4,132,2],[169,4,134,2],[170,0,135,0],[171,0,136,0],[172,4,137,2,"addScreenshotListener"],[172,25,137,23,"addScreenshotListener"],[172,26,137,24,"callback"],[172,34,137,44],[172,36,137,58],[173,6,138,4],[173,12,138,10,"subscription"],[173,24,138,22],[173,27,138,25,"ScreenCapture"],[173,40,138,38],[173,41,138,39,"addScreenshotListener"],[173,62,138,60],[173,63,138,61,"callback"],[173,71,138,69],[173,72,138,70],[174,6,139,4],[174,13,139,11],[174,19,139,17,"subscription"],[174,31,139,29],[174,32,139,30,"remove"],[174,38,139,36],[174,39,139,37],[174,40,139,38],[175,4,140,2],[177,4,142,2],[178,0,143,0],[179,0,144,0],[180,4,145,2],[180,10,145,8,"cleanup"],[180,17,145,15,"cleanup"],[180,18,145,15],[180,20,145,33],[181,6,146,4],[181,10,146,8],[181,14,146,12],[181,15,146,13,"appStateSubscription"],[181,35,146,33],[181,37,146,35],[182,8,147,6],[182,12,147,10],[182,13,147,11,"appStateSubscription"],[182,33,147,31],[182,34,147,32,"remove"],[182,40,147,38],[182,41,147,39],[182,42,147,40],[183,8,148,6],[183,12,148,10],[183,13,148,11,"appStateSubscription"],[183,33,148,31],[183,36,148,34],[183,40,148,38],[184,6,149,4],[185,6,151,4],[185,12,151,10],[185,16,151,14],[185,17,151,15,"disableProtection"],[185,34,151,32],[185,35,151,33],[185,36,151,34],[186,6,152,4,"console"],[186,13,152,11],[186,14,152,12,"log"],[186,17,152,15],[186,18,152,16],[186,61,152,59],[186,62,152,60],[187,4,153,2],[188,2,154,0],[189,2,156,7],[189,8,156,13,"screenshotProtectionService"],[189,35,156,40],[189,38,156,43],[189,42,156,47,"ScreenshotProtectionService"],[189,69,156,74],[189,70,156,75],[189,71,156,76],[190,2,157,0],[190,6,157,0,"_default"],[190,14,157,0],[190,17,157,15,"screenshotProtectionService"],[190,44,157,42],[191,0,157,43],[191,3]],"functionMap":{"names":["<global>","ScreenshotProtectionService","ScreenshotProtectionService#initialize","ScreenshotProtectionService#handleAppStateChange","ScreenshotProtectionService#isScreenshotAllowed","ALLOWED_SCREENS.some$argument_0","ScreenshotProtectionService#updateForScreen","ScreenshotProtectionService#enableProtection","ScreenshotProtectionService#disableProtection","ScreenshotProtectionService#getStatus","ScreenshotProtectionService#addScreenshotListener","<anonymous>","ScreenshotProtectionService#cleanup"],"mappings":"AAA;ACiB;ECQ;GDiB;iCEK;GFO;EGK;gCCE;KDW;GHC;EKK;GLY;EMK;GNU;EOK;GPU;EQK;GRM;ESK;WCE,2BD;GTC;EWK;GXQ;CDC"},"hasCjsExports":false},"type":"js/module"}]}