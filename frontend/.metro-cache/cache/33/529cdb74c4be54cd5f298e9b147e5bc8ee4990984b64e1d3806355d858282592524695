{"dependencies":[{"name":"@react-native-community/netinfo","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":89},"end":{"line":5,"column":93,"index":182}}],"key":"PqZcYTlMIVnzFjdViPzMiGUu7Hg=","exportNames":["*"],"imports":1}},{"name":"./syncService","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":183},"end":{"line":6,"column":44,"index":227}}],"key":"8Bd0Atm62B1sWcPWUeLLI7DOqRQ=","exportNames":["*"],"imports":1}},{"name":"../store/appStore","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":228},"end":{"line":7,"column":48,"index":276}}],"key":"/bohzyw2mCiLwBL1LhK3cj9dt4o=","exportNames":["*"],"imports":1}},{"name":"../store/useDataCacheStore","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":8,"column":0,"index":277},"end":{"line":8,"column":63,"index":340}}],"key":"wF/tZdq+t35joKxKKtXIhFienAY=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"networkService\", {\n    enumerable: true,\n    get: function () {\n      return networkService;\n    }\n  });\n  var _reactNativeCommunityNetinfo = require(_dependencyMap[0], \"@react-native-community/netinfo\");\n  var NetInfo = _interopDefault(_reactNativeCommunityNetinfo);\n  var _syncService = require(_dependencyMap[1], \"./syncService\");\n  var _storeAppStore = require(_dependencyMap[2], \"../store/appStore\");\n  var _storeUseDataCacheStore = require(_dependencyMap[3], \"../store/useDataCacheStore\");\n  /**\n   * Network Service\n   * Monitors network connectivity and triggers sync operations\n   */\n\n  class NetworkService {\n    subscription = null;\n    isConnected = true;\n    wasOffline = false;\n    callbacks = new Set();\n\n    /**\n     * Initialize network monitoring\n     */\n    async initialize() {\n      try {\n        // Get initial state\n        const state = await NetInfo.default.fetch();\n        this.updateConnectionState(state);\n\n        // Subscribe to network changes\n        this.subscription = NetInfo.default.addEventListener(state => {\n          this.updateConnectionState(state);\n        });\n        console.log('[NetworkService] Initialized, connected:', this.isConnected);\n      } catch (error) {\n        console.error('[NetworkService] Initialization failed:', error);\n      }\n    }\n\n    /**\n     * Update connection state and trigger appropriate actions\n     */\n    updateConnectionState(state) {\n      const newConnected = state.isConnected ?? false;\n      const wasConnected = this.isConnected;\n      this.isConnected = newConnected;\n\n      // Update stores\n      _storeAppStore.useAppStore.getState().setOnline(newConnected);\n      _storeUseDataCacheStore.useDataCacheStore.getState().setOnline(newConnected);\n\n      // Notify callbacks\n      this.callbacks.forEach(callback => callback(newConnected));\n\n      // Handle connection changes\n      if (!wasConnected && newConnected) {\n        // Just came online\n        console.log('[NetworkService] Connection restored!');\n        this.handleConnectionRestored();\n      } else if (wasConnected && !newConnected) {\n        // Just went offline\n        console.log('[NetworkService] Connection lost!');\n        this.handleConnectionLost();\n      }\n    }\n\n    /**\n     * Handle when connection is restored\n     */\n    async handleConnectionRestored() {\n      this.wasOffline = false;\n\n      // Trigger sync service to process offline queue and sync data\n      _syncService.syncService.handleNetworkChange(true);\n\n      // Add notification\n      _storeAppStore.useAppStore.getState().addNotification({\n        id: `network-restored-${Date.now()}`,\n        user_id: 'system',\n        title: 'Connection Restored',\n        message: 'Your internet connection has been restored. Syncing data...',\n        type: 'success',\n        read: false,\n        created_at: new Date().toISOString()\n      });\n    }\n\n    /**\n     * Handle when connection is lost\n     */\n    handleConnectionLost() {\n      this.wasOffline = true;\n\n      // Notify sync service\n      _syncService.syncService.handleNetworkChange(false);\n\n      // Add notification\n      _storeAppStore.useAppStore.getState().addNotification({\n        id: `network-lost-${Date.now()}`,\n        user_id: 'system',\n        title: 'Connection Lost',\n        message: 'You are now offline. Your changes will be synced when connection is restored.',\n        type: 'warning',\n        read: false,\n        created_at: new Date().toISOString()\n      });\n    }\n\n    /**\n     * Check if currently connected\n     */\n    getIsConnected() {\n      return this.isConnected;\n    }\n\n    /**\n     * Check connection status immediately\n     */\n    async checkConnection() {\n      const state = await NetInfo.default.fetch();\n      return state.isConnected ?? false;\n    }\n\n    /**\n     * Get detailed network info\n     */\n    async getNetworkInfo() {\n      const state = await NetInfo.default.fetch();\n      return {\n        isConnected: state.isConnected ?? false,\n        type: state.type,\n        isWifi: state.type === 'wifi',\n        isCellular: state.type === 'cellular'\n      };\n    }\n\n    /**\n     * Add callback for network changes\n     */\n    addListener(callback) {\n      this.callbacks.add(callback);\n      return () => this.callbacks.delete(callback);\n    }\n\n    /**\n     * Cleanup\n     */\n    cleanup() {\n      if (this.subscription) {\n        this.subscription();\n        this.subscription = null;\n      }\n      this.callbacks.clear();\n      console.log('[NetworkService] Cleaned up');\n    }\n  }\n  const networkService = new NetworkService();\n  var _default = networkService;\n});","lineCount":178,"map":[[12,2,163,0,"Object"],[12,8,163,0],[12,9,163,0,"defineProperty"],[12,23,163,0],[12,24,163,0,"exports"],[12,31,163,0],[13,4,163,0,"enumerable"],[13,14,163,0],[14,4,163,0,"get"],[14,7,163,0],[14,18,163,0,"get"],[14,19,163,0],[15,6,163,0],[15,13,163,0,"_default"],[15,21,163,0],[16,4,163,0],[17,2,163,0],[18,2,162,0,"Object"],[18,8,162,0],[18,9,162,0,"defineProperty"],[18,23,162,0],[18,24,162,0,"exports"],[18,31,162,0],[19,4,162,0,"enumerable"],[19,14,162,0],[20,4,162,0,"get"],[20,7,162,0],[20,18,162,0,"get"],[20,19,162,0],[21,6,162,0],[21,13,162,0,"networkService"],[21,27,162,0],[22,4,162,0],[23,2,162,0],[24,2,5,0],[24,6,5,0,"_reactNativeCommunityNetinfo"],[24,34,5,0],[24,37,5,0,"require"],[24,44,5,0],[24,45,5,0,"_dependencyMap"],[24,59,5,0],[25,2,5,0],[25,6,5,0,"NetInfo"],[25,13,5,0],[25,16,5,0,"_interopDefault"],[25,31,5,0],[25,32,5,0,"_reactNativeCommunityNetinfo"],[25,60,5,0],[26,2,6,0],[26,6,6,0,"_syncService"],[26,18,6,0],[26,21,6,0,"require"],[26,28,6,0],[26,29,6,0,"_dependencyMap"],[26,43,6,0],[27,2,7,0],[27,6,7,0,"_storeAppStore"],[27,20,7,0],[27,23,7,0,"require"],[27,30,7,0],[27,31,7,0,"_dependencyMap"],[27,45,7,0],[28,2,8,0],[28,6,8,0,"_storeUseDataCacheStore"],[28,29,8,0],[28,32,8,0,"require"],[28,39,8,0],[28,40,8,0,"_dependencyMap"],[28,54,8,0],[29,2,1,0],[30,0,2,0],[31,0,3,0],[32,0,4,0],[34,2,12,0],[34,8,12,6,"NetworkService"],[34,22,12,20],[34,23,12,21],[35,4,13,10,"subscription"],[35,16,13,22],[35,19,13,53],[35,23,13,57],[36,4,14,10,"isConnected"],[36,15,14,21],[36,18,14,33],[36,22,14,37],[37,4,15,10,"wasOffline"],[37,14,15,20],[37,17,15,32],[37,22,15,37],[38,4,16,10,"callbacks"],[38,13,16,19],[38,16,16,44],[38,20,16,48,"Set"],[38,23,16,51],[38,24,16,52],[38,25,16,53],[40,4,18,2],[41,0,19,0],[42,0,20,0],[43,4,21,2],[43,10,21,8,"initialize"],[43,20,21,18,"initialize"],[43,21,21,18],[43,23,21,36],[44,6,22,4],[44,10,22,8],[45,8,23,6],[46,8,24,6],[46,14,24,12,"state"],[46,19,24,17],[46,22,24,20],[46,28,24,26,"NetInfo"],[46,35,24,33],[46,36,24,33,"default"],[46,43,24,33],[46,44,24,34,"fetch"],[46,49,24,39],[46,50,24,40],[46,51,24,41],[47,8,25,6],[47,12,25,10],[47,13,25,11,"updateConnectionState"],[47,34,25,32],[47,35,25,33,"state"],[47,40,25,38],[47,41,25,39],[49,8,27,6],[50,8,28,6],[50,12,28,10],[50,13,28,11,"subscription"],[50,25,28,23],[50,28,28,26,"NetInfo"],[50,35,28,33],[50,36,28,33,"default"],[50,43,28,33],[50,44,28,34,"addEventListener"],[50,60,28,50],[50,61,28,52,"state"],[50,66,28,57],[50,70,28,62],[51,10,29,8],[51,14,29,12],[51,15,29,13,"updateConnectionState"],[51,36,29,34],[51,37,29,35,"state"],[51,42,29,40],[51,43,29,41],[52,8,30,6],[52,9,30,7],[52,10,30,8],[53,8,32,6,"console"],[53,15,32,13],[53,16,32,14,"log"],[53,19,32,17],[53,20,32,18],[53,62,32,60],[53,64,32,62],[53,68,32,66],[53,69,32,67,"isConnected"],[53,80,32,78],[53,81,32,79],[54,6,33,4],[54,7,33,5],[54,8,33,6],[54,15,33,13,"error"],[54,20,33,18],[54,22,33,20],[55,8,34,6,"console"],[55,15,34,13],[55,16,34,14,"error"],[55,21,34,19],[55,22,34,20],[55,63,34,61],[55,65,34,63,"error"],[55,70,34,68],[55,71,34,69],[56,6,35,4],[57,4,36,2],[59,4,38,2],[60,0,39,0],[61,0,40,0],[62,4,41,10,"updateConnectionState"],[62,25,41,31,"updateConnectionState"],[62,26,41,32,"state"],[62,31,41,51],[62,33,41,59],[63,6,42,4],[63,12,42,10,"newConnected"],[63,24,42,22],[63,27,42,25,"state"],[63,32,42,30],[63,33,42,31,"isConnected"],[63,44,42,42],[63,48,42,46],[63,53,42,51],[64,6,43,4],[64,12,43,10,"wasConnected"],[64,24,43,22],[64,27,43,25],[64,31,43,29],[64,32,43,30,"isConnected"],[64,43,43,41],[65,6,45,4],[65,10,45,8],[65,11,45,9,"isConnected"],[65,22,45,20],[65,25,45,23,"newConnected"],[65,37,45,35],[67,6,47,4],[68,6,48,4,"useAppStore"],[68,20,48,15],[68,21,48,15,"useAppStore"],[68,32,48,15],[68,33,48,16,"getState"],[68,41,48,24],[68,42,48,25],[68,43,48,26],[68,44,48,27,"setOnline"],[68,53,48,36],[68,54,48,37,"newConnected"],[68,66,48,49],[68,67,48,50],[69,6,49,4,"useDataCacheStore"],[69,29,49,21],[69,30,49,21,"useDataCacheStore"],[69,47,49,21],[69,48,49,22,"getState"],[69,56,49,30],[69,57,49,31],[69,58,49,32],[69,59,49,33,"setOnline"],[69,68,49,42],[69,69,49,43,"newConnected"],[69,81,49,55],[69,82,49,56],[71,6,51,4],[72,6,52,4],[72,10,52,8],[72,11,52,9,"callbacks"],[72,20,52,18],[72,21,52,19,"forEach"],[72,28,52,26],[72,29,52,28,"callback"],[72,37,52,36],[72,41,52,41,"callback"],[72,49,52,49],[72,50,52,50,"newConnected"],[72,62,52,62],[72,63,52,63],[72,64,52,64],[74,6,54,4],[75,6,55,4],[75,10,55,8],[75,11,55,9,"wasConnected"],[75,23,55,21],[75,27,55,25,"newConnected"],[75,39,55,37],[75,41,55,39],[76,8,56,6],[77,8,57,6,"console"],[77,15,57,13],[77,16,57,14,"log"],[77,19,57,17],[77,20,57,18],[77,59,57,57],[77,60,57,58],[78,8,58,6],[78,12,58,10],[78,13,58,11,"handleConnectionRestored"],[78,37,58,35],[78,38,58,36],[78,39,58,37],[79,6,59,4],[79,7,59,5],[79,13,59,11],[79,17,59,15,"wasConnected"],[79,29,59,27],[79,33,59,31],[79,34,59,32,"newConnected"],[79,46,59,44],[79,48,59,46],[80,8,60,6],[81,8,61,6,"console"],[81,15,61,13],[81,16,61,14,"log"],[81,19,61,17],[81,20,61,18],[81,55,61,53],[81,56,61,54],[82,8,62,6],[82,12,62,10],[82,13,62,11,"handleConnectionLost"],[82,33,62,31],[82,34,62,32],[82,35,62,33],[83,6,63,4],[84,4,64,2],[86,4,66,2],[87,0,67,0],[88,0,68,0],[89,4,69,2],[89,10,69,16,"handleConnectionRestored"],[89,34,69,40,"handleConnectionRestored"],[89,35,69,40],[89,37,69,58],[90,6,70,4],[90,10,70,8],[90,11,70,9,"wasOffline"],[90,21,70,19],[90,24,70,22],[90,29,70,27],[92,6,72,4],[93,6,73,4,"syncService"],[93,18,73,15],[93,19,73,15,"syncService"],[93,30,73,15],[93,31,73,16,"handleNetworkChange"],[93,50,73,35],[93,51,73,36],[93,55,73,40],[93,56,73,41],[95,6,75,4],[96,6,76,4,"useAppStore"],[96,20,76,15],[96,21,76,15,"useAppStore"],[96,32,76,15],[96,33,76,16,"getState"],[96,41,76,24],[96,42,76,25],[96,43,76,26],[96,44,76,27,"addNotification"],[96,59,76,42],[96,60,76,43],[97,8,77,6,"id"],[97,10,77,8],[97,12,77,10],[97,32,77,30,"Date"],[97,36,77,34],[97,37,77,35,"now"],[97,40,77,38],[97,41,77,39],[97,42,77,40],[97,44,77,42],[98,8,78,6,"user_id"],[98,15,78,13],[98,17,78,15],[98,25,78,23],[99,8,79,6,"title"],[99,13,79,11],[99,15,79,13],[99,36,79,34],[100,8,80,6,"message"],[100,15,80,13],[100,17,80,15],[100,78,80,76],[101,8,81,6,"type"],[101,12,81,10],[101,14,81,12],[101,23,81,21],[102,8,82,6,"read"],[102,12,82,10],[102,14,82,12],[102,19,82,17],[103,8,83,6,"created_at"],[103,18,83,16],[103,20,83,18],[103,24,83,22,"Date"],[103,28,83,26],[103,29,83,27],[103,30,83,28],[103,31,83,29,"toISOString"],[103,42,83,40],[103,43,83,41],[104,6,84,4],[104,7,84,5],[104,8,84,6],[105,4,85,2],[107,4,87,2],[108,0,88,0],[109,0,89,0],[110,4,90,10,"handleConnectionLost"],[110,24,90,30,"handleConnectionLost"],[110,25,90,30],[110,27,90,39],[111,6,91,4],[111,10,91,8],[111,11,91,9,"wasOffline"],[111,21,91,19],[111,24,91,22],[111,28,91,26],[113,6,93,4],[114,6,94,4,"syncService"],[114,18,94,15],[114,19,94,15,"syncService"],[114,30,94,15],[114,31,94,16,"handleNetworkChange"],[114,50,94,35],[114,51,94,36],[114,56,94,41],[114,57,94,42],[116,6,96,4],[117,6,97,4,"useAppStore"],[117,20,97,15],[117,21,97,15,"useAppStore"],[117,32,97,15],[117,33,97,16,"getState"],[117,41,97,24],[117,42,97,25],[117,43,97,26],[117,44,97,27,"addNotification"],[117,59,97,42],[117,60,97,43],[118,8,98,6,"id"],[118,10,98,8],[118,12,98,10],[118,28,98,26,"Date"],[118,32,98,30],[118,33,98,31,"now"],[118,36,98,34],[118,37,98,35],[118,38,98,36],[118,40,98,38],[119,8,99,6,"user_id"],[119,15,99,13],[119,17,99,15],[119,25,99,23],[120,8,100,6,"title"],[120,13,100,11],[120,15,100,13],[120,32,100,30],[121,8,101,6,"message"],[121,15,101,13],[121,17,101,15],[121,96,101,94],[122,8,102,6,"type"],[122,12,102,10],[122,14,102,12],[122,23,102,21],[123,8,103,6,"read"],[123,12,103,10],[123,14,103,12],[123,19,103,17],[124,8,104,6,"created_at"],[124,18,104,16],[124,20,104,18],[124,24,104,22,"Date"],[124,28,104,26],[124,29,104,27],[124,30,104,28],[124,31,104,29,"toISOString"],[124,42,104,40],[124,43,104,41],[125,6,105,4],[125,7,105,5],[125,8,105,6],[126,4,106,2],[128,4,108,2],[129,0,109,0],[130,0,110,0],[131,4,111,2,"getIsConnected"],[131,18,111,16,"getIsConnected"],[131,19,111,16],[131,21,111,28],[132,6,112,4],[132,13,112,11],[132,17,112,15],[132,18,112,16,"isConnected"],[132,29,112,27],[133,4,113,2],[135,4,115,2],[136,0,116,0],[137,0,117,0],[138,4,118,2],[138,10,118,8,"checkConnection"],[138,25,118,23,"checkConnection"],[138,26,118,23],[138,28,118,44],[139,6,119,4],[139,12,119,10,"state"],[139,17,119,15],[139,20,119,18],[139,26,119,24,"NetInfo"],[139,33,119,31],[139,34,119,31,"default"],[139,41,119,31],[139,42,119,32,"fetch"],[139,47,119,37],[139,48,119,38],[139,49,119,39],[140,6,120,4],[140,13,120,11,"state"],[140,18,120,16],[140,19,120,17,"isConnected"],[140,30,120,28],[140,34,120,32],[140,39,120,37],[141,4,121,2],[143,4,123,2],[144,0,124,0],[145,0,125,0],[146,4,126,2],[146,10,126,8,"getNetworkInfo"],[146,24,126,22,"getNetworkInfo"],[146,25,126,22],[146,27,131,5],[147,6,132,4],[147,12,132,10,"state"],[147,17,132,15],[147,20,132,18],[147,26,132,24,"NetInfo"],[147,33,132,31],[147,34,132,31,"default"],[147,41,132,31],[147,42,132,32,"fetch"],[147,47,132,37],[147,48,132,38],[147,49,132,39],[148,6,133,4],[148,13,133,11],[149,8,134,6,"isConnected"],[149,19,134,17],[149,21,134,19,"state"],[149,26,134,24],[149,27,134,25,"isConnected"],[149,38,134,36],[149,42,134,40],[149,47,134,45],[150,8,135,6,"type"],[150,12,135,10],[150,14,135,12,"state"],[150,19,135,17],[150,20,135,18,"type"],[150,24,135,22],[151,8,136,6,"isWifi"],[151,14,136,12],[151,16,136,14,"state"],[151,21,136,19],[151,22,136,20,"type"],[151,26,136,24],[151,31,136,29],[151,37,136,35],[152,8,137,6,"isCellular"],[152,18,137,16],[152,20,137,18,"state"],[152,25,137,23],[152,26,137,24,"type"],[152,30,137,28],[152,35,137,33],[153,6,138,4],[153,7,138,5],[154,4,139,2],[156,4,141,2],[157,0,142,0],[158,0,143,0],[159,4,144,2,"addListener"],[159,15,144,13,"addListener"],[159,16,144,14,"callback"],[159,24,144,39],[159,26,144,53],[160,6,145,4],[160,10,145,8],[160,11,145,9,"callbacks"],[160,20,145,18],[160,21,145,19,"add"],[160,24,145,22],[160,25,145,23,"callback"],[160,33,145,31],[160,34,145,32],[161,6,146,4],[161,13,146,11],[161,19,146,17],[161,23,146,21],[161,24,146,22,"callbacks"],[161,33,146,31],[161,34,146,32,"delete"],[161,40,146,38],[161,41,146,39,"callback"],[161,49,146,47],[161,50,146,48],[162,4,147,2],[164,4,149,2],[165,0,150,0],[166,0,151,0],[167,4,152,2,"cleanup"],[167,11,152,9,"cleanup"],[167,12,152,9],[167,14,152,18],[168,6,153,4],[168,10,153,8],[168,14,153,12],[168,15,153,13,"subscription"],[168,27,153,25],[168,29,153,27],[169,8,154,6],[169,12,154,10],[169,13,154,11,"subscription"],[169,25,154,23],[169,26,154,24],[169,27,154,25],[170,8,155,6],[170,12,155,10],[170,13,155,11,"subscription"],[170,25,155,23],[170,28,155,26],[170,32,155,30],[171,6,156,4],[172,6,157,4],[172,10,157,8],[172,11,157,9,"callbacks"],[172,20,157,18],[172,21,157,19,"clear"],[172,26,157,24],[172,27,157,25],[172,28,157,26],[173,6,158,4,"console"],[173,13,158,11],[173,14,158,12,"log"],[173,17,158,15],[173,18,158,16],[173,47,158,45],[173,48,158,46],[174,4,159,2],[175,2,160,0],[176,2,162,7],[176,8,162,13,"networkService"],[176,22,162,27],[176,25,162,30],[176,29,162,34,"NetworkService"],[176,43,162,48],[176,44,162,49],[176,45,162,50],[177,2,163,0],[177,6,163,0,"_default"],[177,14,163,0],[177,17,163,15,"networkService"],[177,31,163,29],[178,0,163,30],[178,3]],"functionMap":{"names":["<global>","NetworkService","NetworkService#initialize","NetInfo.addEventListener$argument_0","NetworkService#updateConnectionState","callbacks.forEach$argument_0","NetworkService#handleConnectionRestored","NetworkService#handleConnectionLost","NetworkService#getIsConnected","NetworkService#checkConnection","NetworkService#getNetworkInfo","NetworkService#addListener","<anonymous>","NetworkService#cleanup"],"mappings":"AAA;ACW;ECS;mDCO;ODE;GDM;EGK;2BCW,oCD;GHY;EKK;GLgB;EMK;GNgB;EOK;GPE;EQK;GRG;ESK;GTa;EUK;WCE,qCD;GVC;EYK;GZO;CDC"},"hasCjsExports":false},"type":"js/module"}]}